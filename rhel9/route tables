ğŸ“˜ RHEL 9.x ë©€í‹° ê²Œì´íŠ¸ì›¨ì´ êµ¬ì„± ê°€ì´ë“œ
bond0 = 192.168.150.140 / ens3 = 172.16.200.139
===============================================
1) ë¼ìš°íŒ… í…Œì´ë¸” ìƒì„± (ìµœì´ˆ 1íšŒ)
1. mkdir -p /etc/iproute2

2. cat <<EOF >> /etc/iproute2/rt_tables
100 rt10
200 rt20
EOF


ì™„ì„±ëœ /etc/iproute2/rt_tables ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŒ:

255 local
254 main
253 default
0   unspec
100 rt10
200 rt20

2) bond0 ì •ì±… ë¼ìš°íŒ… ì„¤ì • (rt10)
3. nmcli connection modify bond0 ipv4.routes "192.168.150.0/24 0.0.0.0 table=100, 0.0.0.0/0 192.168.150.1 table=100"

4. nmcli connection modify bond0 ipv4.routing-rules "from 192.168.150.140/24 table 100 priority 1000"

3) ens3 ì •ì±… ë¼ìš°íŒ… ì„¤ì • (rt20)
5. nmcli connection modify ens3 ipv4.routes "172.16.200.0/24 0.0.0.0 table=200, 0.0.0.0/0 172.16.200.1 table=200"

6. nmcli connection modify ens3 ipv4.routing-rules "from 172.16.200.139/24 table 200 priority 1001"

4) NetworkManager ì„¤ì • ì ìš©
7. nmcli connection up bond0
8. nmcli connection up ens3

5) Reverse Path Filtering ì™„í™” (ë©€í‹°GW í•„ìˆ˜)
(ì¼ì‹œ ì ìš©)
9. echo 0 > /proc/sys/net/ipv4/conf/bond0/rp_filter
10. echo 0 > /proc/sys/net/ipv4/conf/ens3/rp_filter

(ì˜êµ¬ ì ìš©)
11. cat <<EOF > /etc/sysctl.d/99-multi-gw.conf
net.ipv4.conf.bond0.rp_filter = 0
net.ipv4.conf.ens3.rp_filter = 0
EOF

12. sysctl --system

6) ì ìš© ê²€ì¦ ëª…ë ¹ì–´
ì •ì±… ë¼ìš°íŒ… ê·œì¹™ í™•ì¸
13. ip rule


ì˜ˆìƒ ì¶œë ¥:

1000: from 192.168.150.0/24 lookup rt10
1001: from 172.16.200.0/24 lookup rt20

bond0 ë¼ìš°íŒ… í…Œì´ë¸” í™•ì¸
14. ip route show table 100


ì˜ˆìƒ:

default via 192.168.150.1 dev bond0
192.168.150.0/24 dev bond0 scope link

ens3 ë¼ìš°íŒ… í…Œì´ë¸” í™•ì¸
15. ip route show table 200


ì˜ˆìƒ:

default via 172.16.200.1 dev ens3
172.16.200.0/24 dev ens3 scope link
