3ï¸âƒ£ ë°©ë²• â‘¡ Policy Routing (ì‹¤ë¬´ ìµœë‹¤ ì‚¬ìš© â­)

ì¶œë°œì§€ IP / ì¸í„°í˜ì´ìŠ¤ë³„ë¡œ ë‹¤ë¥¸ GW ì‚¬ìš©

â‘  ë¼ìš°íŒ… í…Œì´ë¸” ì¶”ê°€
vi /etc/iproute2/rt_tables

100 gw1
200 gw2

â‘¡ í…Œì´ë¸”ë³„ ë¼ìš°íŠ¸
ip route add default via 192.168.0.1 dev eth0 table gw1
ip route add default via 10.0.0.1 dev eth1 table gw2

â‘¢ ê·œì¹™ ì¶”ê°€ (ì¶œë°œì§€ ê¸°ì¤€)
ip rule add from 192.168.0.100 table gw1
ip rule add from 10.0.0.100 table gw2

â‘£ ë¡œì»¬ ë¼ìš°íŠ¸ (ì¤‘ìš”)
ip route add 192.168.0.0/24 dev eth0 src 192.168.0.100 table gw1
ip route add 10.0.0.0/24 dev eth1 src 10.0.0.100 table gw2


ğŸ” í™•ì¸

ip rule show
ip route show table gw1
ip route show table gw2


âœ… ì„œë²„ 2 NIC + 2 íšŒì„  í™˜ê²½ì—ì„œ ì •ì„
âœ… ë©€í‹°íŒ¨ìŠ¤ / ìŠ¤í† ë¦¬ì§€ / ë°±ì—…ë§ ë¶„ë¦¬í•  ë•Œ í•„ìˆ˜


5ï¸âƒ£ ë°©ë²• â‘£ NetworkManager / netplan (OS ì„¤ì •)
ğŸ”¹ Ubuntu (netplan + policy)
network:
  version: 2
  ethernets:
    eth0:
      addresses: [192.168.0.100/24]
      routes:
        - to: 0.0.0.0/0
          via: 192.168.0.1
          table: 100
      routing-policy:
        - from: 192.168.0.100
          table: 100

netplan apply

ğŸ”¹ Rocky / RHEL (nmcli)
nmcli con mod eth0 ipv4.routes "0.0.0.0/0 192.168.0.1 table=100"
nmcli con mod eth0 ipv4.routing-rules "from 192.168.0.100 table 100"
nmcli con up eth0
