# Linux iSCSI êµ¬ì„± ê°€ì´ë“œ

## 1ï¸âƒ£ Target ì„œë²„ (ë””ìŠ¤í¬ ì œê³µ ì„œë²„)

- **IP:** 192.168.150.140
- ì—­í• : iSCSI Target, ë””ìŠ¤í¬ ì œê³µ

| ë‹¨ê³„ | ëª…ë ¹ì–´ / ë‚´ìš© | ì„¤ëª… |
|------|---------------|------|
| 1.1 | `yum install -y targetcli` | iSCSI Target íŒ¨í‚¤ì§€ ì„¤ì¹˜ |
| 1.2 | `systemctl enable --now target` | target ì„œë¹„ìŠ¤ ì‹œì‘ ë° ë¶€íŒ… ìë™ ë“±ë¡ |
| 1.3 | `targetcli` | targetcli ì‰˜ ì‹¤í–‰ |
| 1.4 | `/ > iscsi create iqn.2025-12.com.test:1234` | iSCSI Target ìƒì„± (IQN ì§€ì •) |
| 1.5 | `/ > backstores/block create name=iscsi dev=/dev/sdb` | ì‹¤ì œ ë””ìŠ¤í¬(`/dev/sdb`)ë¥¼ ë°±ìŠ¤í† ì–´ë¡œ ë“±ë¡ |
| 1.6 | `/ > iscsi/iqn.2025-12.com.test:1234/tpg1/portals create 192.168.150.140` | iSCSI ì ‘ì† í¬í„¸(IP) ìƒì„± (Target ì„œë²„ IP ì‚¬ìš©) |
| 1.7 | `/ > iscsi/iqn.2025-12.com.test:1234/tpg1/luns create /backstores/block/iscsi` | LUN ìƒì„± ë° ë°±ìŠ¤í† ì–´ ì—°ê²° |
| 3.1 | `/ > iscsi/iqn.2025-12.com.test:1234/tpg1/acls create iqn.1994-05.com.redhat:d4dd30d5426` | ACL ìƒì„± â†’ Initiator(IP 142, IQN) ì ‘ê·¼ í—ˆìš© |

âœ… Target ì„œë²„ IPëŠ” `192.168.150.140`, ACLì— Initiator IQN ë“±ë¡

---

## 2ï¸âƒ£ Initiator ì„œë²„ (ë””ìŠ¤í¬ ë°›ëŠ” ì„œë²„)

- **IP:** 192.168.150.142
- ì—­í• : iSCSI Initiator, Target ë””ìŠ¤í¬ ì‚¬ìš©

| ë‹¨ê³„ | ëª…ë ¹ì–´ / ë‚´ìš© | ì„¤ëª… |
|------|---------------|------|
| 2.1 | `yum install -y iscsi-initiator-utils` | iSCSI Initiator íŒ¨í‚¤ì§€ ì„¤ì¹˜ |
| 2.2 | `cat /etc/iscsi/initiatorname.iscsi` | Initiator IQN í™•ì¸: `iqn.1994-05.com.redhat:d4dd30d5426` |
| 3.2 | `iscsiadm -m discovery -t st -p 192.168.150.140` | Target(IP 140) ê²€ìƒ‰ |
| 3.3 | `iscsiadm -m node -T iqn.2025-12.com.test:1234 -l` | Target ë¡œê·¸ì¸ |
| 3.4 | `grep "Attached SCSI" /var/log/messages` <br> `mkfs.ext4 /dev/sdb` | Target ë””ìŠ¤í¬ í™•ì¸ ë° íŒŒì¼ì‹œìŠ¤í…œ ìƒì„± |
| 3.5 | `mkdir /iscsiVolume` <br> `mount /dev/sdb /iscsiVolume/` <br> `df -Th` | ë§ˆìš´íŠ¸ ë° ì‚¬ìš© ê°€ëŠ¥ í™•ì¸ |
| 3.6 | `/etc/fstab`ì— ë“±ë¡ | ë¶€íŒ… ì‹œ ìë™ ë§ˆìš´íŠ¸ |

---

### ğŸ”¹ ìš”ì•½

- **Target ì„œë²„(IP 140)**: Target ì„¤ì¹˜, LUN ìƒì„±, Portal/IP ì„¤ì •, ACL ë“±ë¡  
- **Initiator ì„œë²„(IP 142)**: Target ê²€ìƒ‰, ë¡œê·¸ì¸, ë””ìŠ¤í¬ í™•ì¸, íŒŒì¼ì‹œìŠ¤í…œ ìƒì„±, ë§ˆìš´íŠ¸  
- ACLì— ë“±ë¡ëœ IQNë§Œ Targetì— ì ‘ê·¼ ê°€ëŠ¥
